# SonarCloud configuration for Halloween Monorepo
sonar.projectKey=griswaldbrooks_halloween
sonar.organization=griswaldbrooks

# Project metadata
sonar.projectName=Halloween Haunted House
sonar.projectVersion=1.0.0

# Source code
sonar.sources=.
sonar.exclusions=**/node_modules/**,**/coverage*/**,**/*.test.js,**/*.spec.js,**/test*.js,**/test*.cpp,**/test*.py,**/pixi.lock,**/.pixi/**,**/2025/**,**/.github/**,**/arduino/**

# Test files
sonar.tests=.
sonar.test.inclusions=**/*.test.js,**/*.spec.js,**/test*.js,**/test*.cpp,**/test*.py

# Language-specific coverage paths
# JavaScript
sonar.javascript.lcov.reportPaths=window_spider_trigger/coverage/lcov.info,spider_crawl_projection/coverage/lcov.info,hatching_egg/coverage-js/lcov.info

# C++ (gcov/lcov)
sonar.cpp.coverage.reportPaths=hatching_egg/coverage-cpp-filtered.info

# Python
sonar.python.coverage.reportPaths=hatching_egg/coverage-python/coverage.xml

# Coverage exclusions
sonar.coverage.exclusions=**/*.test.js,**/*.spec.js,**/test*.js,**/test*.cpp,**/test*.py,**/optimize-*.js,**/__tests__/**,**/jest.config.js,**/c8.config.json,**/arduino/**

# Source encoding
sonar.sourceEncoding=UTF-8

# Additional settings
sonar.verbose=false

# Disable C/C++/Objective-C analysis (Arduino files, analyzed separately with gcov)
sonar.c.file.suffixes=-
sonar.cpp.file.suffixes=-
sonar.objc.file.suffixes=-

# Rule Exceptions (with documented rationale - Added Nov 10, 2025)
# Reference: spider_crawl_projection/SONARCLOUD_STRATEGY.md
# Reference: spider_crawl_projection/PHASE1_LESSONS_LEARNED.md
# Total exceptions: 68 issues (54 S7764 + 13 S7741 + 1 S107)

# S7764: Prefer globalThis over window (54 instances across 8 files)
# CRITICAL: spider_crawl_projection requires "window" for browser compatibility
# Changing to globalThis breaks browser exports - see PHASE1_LESSONS_LEARNED.md
# The pattern "typeof window !== 'undefined'" is REQUIRED for dual Node.js/browser modules
# Affected files: spider-animation.js, keyboard-controller.js, mode-controller.js,
#                 position-utils.js, boundary-utils.js, spider-factory.js,
#                 animation-math.js, config-defaults.js
sonar.issue.ignore.multicriteria=e1,e2,e3

sonar.issue.ignore.multicriteria.e1.ruleKey=javascript:S7764
sonar.issue.ignore.multicriteria.e1.resourceKey=spider_crawl_projection/**/*.js

# S7741: Compare with undefined directly instead of using typeof (13 instances)
# CRITICAL: typeof operator is safer for checking undefined in browser/Node.js dual modules
# Direct comparison (window !== undefined) can throw ReferenceError if variable doesn't exist
# The typeof operator provides safe existence checking across environments
# The pattern guards against ReferenceError when checking for browser vs Node.js environment
# See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#typeof_undeclared_variables
sonar.issue.ignore.multicriteria.e2.ruleKey=javascript:S7741
sonar.issue.ignore.multicriteria.e2.resourceKey=spider_crawl_projection/**/*.js

# S107: Function has too many parameters (1 instance)
# TECHNICAL: calculateSwingPositionForCrawl requires 9 parameters for leg animation math
# All parameters are necessary and well-documented with JSDoc
# Refactoring to parameter object would require changing 15+ call sites
# Function is performance-critical in animation loop, current form is optimal
# Rationale: Performance > code smell in animation loop hot path
sonar.issue.ignore.multicriteria.e3.ruleKey=javascript:S107
sonar.issue.ignore.multicriteria.e3.resourceKey=spider_crawl_projection/animation-math.js
